<%- include("../partials/header") %>
<div class="bg-white shadow overflow-hidden my-3 rounded-lg max-w-sm md:max-w-2xl lg:max-w-4xl mx-auto">
    <div class="px-4 py-5 md:px-6">
        <h3 class="text-lg leading-6 font-medium text-gray-900">
            Game details
        </h3>
        <div class="flex items-center justify-center max-h-72  text-center overflow-hidden">
            <img class="max-h-72" src="<%=game.picture%>">
          </div>
    </div>
    <div class="border-t border-gray-200">
        <div>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <div class="text-sm font-medium text-gray-500">Title</div>
                <div class="mt-1 font-bold text-gray-900 sm:mt-0 sm:col-span-2"><%=game.title%></div>
            
            </div>
           
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <div class="text-sm font-medium text-gray-500">Description</div>
                <div class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"><%-game.description%></div>
            </div>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <div class="text-sm font-medium text-gray-500">Tags</div>
                <div class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                    <div>
                    <% if(game.tag) { %>
                        <% game.tag.forEach(function(tag) { %>
                        <div class="bg-green-100 text-green-800 text-xs inline font-semibold mr-2 px-2.5 py-0.5 rounded "><%=tag.content%></div>
                        <% }) %>
                    <% } %>
                    </div>
                   
                </div>
            </div>
            <div class="bg-white px-4 py-5 grid grid-cols-3 gap-4">
                <div class="text-sm font-medium text-gray-500">Added by</div>
                <div class="mt-1 text-sm text-gray-900 flex justify-between items-center sm:mt-0 sm:col-span-2">
                    <%=game.gameAuthorName%>
                    <%if (game.gameAuthor == user.id) {%>
                        <div class="flex justify-end">
                        <a href="/games/<%=game._id%>/edit">
                            <button class="bg-green-500 mr-1 transition duration-150 ease-in-out hover:bg-green-400 rounded text-white px-3 py-2 text-s focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                Edit game
                            </button>
                        </a>
                        <form action="/games/<%=game._id%>?_method=DELETE" method="POST">
                            <button class="bg-red-500 transition duration-150 ease-in-out hover:bg-red-400 rounded text-white px-3 py-2 text-s focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                Delete game
                            </button>
                        </form>
                    </div>
                        <%}%>
                </div>
            </div>
            <div class="bg-gray-50 px-4 py-5 grid grid-cols-3 gap-4">
                <div class="text-sm font-medium text-gray-500">Reviews</div>
                    <div class="mt-1 text-sm text-gray-900 col-span-2">
                        <% if (!reviews.length) {%>
                            <div>
                                No reviews yet.
                            </div> 
                        <%} else { %>
                                                        <% game.reviews.forEach(function(review) { %>
                                <div class="p-2 shadow rounded bg-white  m-2 flex flex-col">
                                    <div class="text-2xl"><%=review.rating%></div>
                                    <div><%=review.content%></div>
                                    <div class="flex justify-between">
                                        <div class="italic mt-1">
                                            <%=review.reviewAuthorName%>
                                        </div>
                                        
                                    </div>
                                    <div class="flex justify-end">
                                        <%if (review.reviewAuthor == user.id) {%>
                                            <a href="/games/<%=game._id%>/reviews/<%=review._id%>">
                                                <button class="bg-green-500 mr-1 transition duration-150 ease-in-out hover:bg-green-400 rounded text-white px-3 py-2 text-s focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                                                    Edit review
                                                </button>
                                            </a>
                                            <form action="/reviews/<%=review._id%>?_method=DELETE" method="POST">
                                            <button class="bg-red-500 transition duration-150 ease-in-out hover:bg-red-400 rounded text-white px-3 py-2 text-s focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                                                Delete review
                                            </button>
                                        </form>
                                        <% } %>
                                    </div>
                                </div>                     
                            <% }) %>
                        <% } %>
                        <br>
                        <div>
                            <form action="/games/<%=game._id%>/reviews" method="POST">
                                <div class="text-gray-500 font-bold">Add review</div><br>
                                
                                <select name="rating">
                                    <option value="ðŸŽ²">ðŸŽ²</option>
                                    <option value="ðŸŽ²ðŸŽ²">ðŸŽ²ðŸŽ²</option>
                                    <option value="ðŸŽ²ðŸŽ²ðŸŽ²">ðŸŽ²ðŸŽ²ðŸŽ²</option>
                                    <option value="ðŸŽ²ðŸŽ²ðŸŽ²ðŸŽ²">ðŸŽ²ðŸŽ²ðŸŽ²ðŸŽ²</option>
                                    <option value="ðŸŽ²ðŸŽ²ðŸŽ²ðŸŽ²ðŸŽ²">ðŸŽ²ðŸŽ²ðŸŽ²ðŸŽ²ðŸŽ²</option>
                                </select><br>
                                <textarea class="block w-full rounded-md my-2" type="text" name="content"></textarea>
                                <button class="bg-[#fc773a] transition duration-150 ease-in-out hover:bg-[#ef654a] rounded text-white px-6 py-2 font-bold text-s focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#fc773a]">
                                    Submit
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




<%- include("../partials/footer") %>