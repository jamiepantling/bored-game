<%- include("../partials/header") %>
<div
  class="bg-white shadow p-2 flex flex-col items-center justify-center overflow-hidden my-3 rounded-lg max-w-sm md:max-w-2xl lg:max-w-4xl mx-auto"
>
  <div class="px-4 py-5 md:px-6">
    <h3 class="text-lg leading-6 font-medium text-gray-900">
      Collection details
    </h3>
  </div>
  <div class="flex justify-center flex-col gap-2 items-center">
    <div>Add game to collection:</div>

    <form
      action="/users/<%=user._id%>/collections/<%=collection._id%>?_method=PUT"
      method="POST"
      class="flex justify-center gap-2 items-center flex-col"
    >
      <select class="rounded  " placeholder="" name="game">
        <%uncollectedGames.forEach(game => {%>

        <option class="" value="<%=game._id%>"><span class=""><%=game.title%></span></option>

        <%})%></select
      >
      <button
        class="bg-[#fc773a] transition duration-150 ease-in-out hover:bg-[#ef654a] rounded text-white px-6 py-2 font-bold text-s focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#fc773a]"
      >
        Add
      </button>
    </form>

  </div>
  <div class="px-4">
    <div class="flex flex-wrap gap-3 justify-center">
      <% if (collectedGames.length) { %> <% collectedGames.forEach(game =>
      {%>
      <div
        class="collection-game-card border-2 bg-white flex flex-col justify-between mx-auto my-4 p-4 shadow rounded-lg"
      >
        <div class="flex font-title font-bold items-center justify-between">
          <%=game.title%>
          <form
            action="/users/<%=user._id%>/collections/<%=collection._id%>?_method=PUT"
            method="POST"
          >
            <button
              name="game"
              class="text-red-600 font-bold text-xl"
              value="<%=game._id%>"
            >
              x
            </button>
          </form>
        </div>
        <div class="flex justify-center">
          <a class="p-1" href="/games/<%= game.id%>"
            ><img class="collection-game-image" src="<%=game.picture%>"
          /></a>
        </div>
      </div>
      <%})%> <%}%>
    </div>
  </div>
  <div>
    <form
      action="/collections/<%=collection._id%>?_method=DELETE"
      method="POST"
    >
      <button
        class="bg-red-500 transition duration-150 ease-in-out hover:bg-red-400 rounded text-white px-3 py-2 my-2 text-s focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
      >
        Delete collection
      </button>
    </form>
  </div>
</div>

<%- include("../partials/footer") %>
